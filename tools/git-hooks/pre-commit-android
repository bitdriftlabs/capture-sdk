# Android pre-commit hook. Feel free to copy these contents into .git/hooks/pre-commit
#!/bin/sh
echo "Running ktlint format on staged Kotlin files under capture-sdk/platform/jvm/..."
STAGED_KOTLIN_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '^platform/jvm/.*\.kt$')

if [ -z "$STAGED_KOTLIN_FILES" ]; then
  echo "No staged Kotlin files under capture-sdk/platform/jvm/ to format."
  exit 0
fi

echo "$STAGED_KOTLIN_FILES" | xargs ktlint -F
echo "$STAGED_KOTLIN_FILES" | xargs git add

exit 0
