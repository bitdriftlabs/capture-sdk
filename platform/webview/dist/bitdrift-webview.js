(function() {
"use strict";var BitdriftWebView=(()=>{var ue=Object.defineProperty;var le=(t,e,r)=>e in t?ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var g=(t,e,r)=>le(t,typeof e!="symbol"?e+"":e,r);function pe(){return window.webkit?.messageHandlers?.BitdriftLogger?"ios":window.BitdriftLogger?"android":"unknown"}function _(t){let e=pe(),r=JSON.stringify(t);switch(e){case"ios":window.webkit?.messageHandlers?.BitdriftLogger?.postMessage(t);break;case"android":window.BitdriftLogger?.log(r);break;case"unknown":typeof console<"u"&&console.debug("[Bitdrift WebView]",t);break}}function X(){window.bitdrift||(window.bitdrift={log:_})}function u(t){window.bitdrift?(console.log("[Bitdrift WebView] Logging message via bridge",t),window.bitdrift.log(t)):_(t)}function l(t){return{v:1,timestamp:Date.now(),...t}}var Y=-1,y=t=>{addEventListener("pageshow",(e=>{e.persisted&&(Y=e.timeStamp,t(e))}),!0)},p=(t,e,r,n)=>{let i,o;return s=>{e.value>=0&&(s||n)&&(o=e.value-(i??0),(o||i===void 0)&&(i=e.value,e.delta=o,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,r),t(e)))}},N=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},H=()=>{let t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},T=()=>H()?.activationStart??0,f=(t,e=-1)=>{let r=H(),n="navigate";return Y>=0?n="back-forward-cache":r&&(document.prerendering||T()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},P=new WeakMap;function x(t,e){return P.get(t)||P.set(t,new e),P.get(t)}var k=class{constructor(){g(this,"t");g(this,"i",0);g(this,"o",[])}h(e){if(e.hadRecentInput)return;let r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}},b=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){let n=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return n.observe({type:t,buffered:!0,...r}),n}}catch{}},F=t=>{let e=!1;return()=>{e||(t(),e=!0)}},v=-1,Z=new Set,V=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,S=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(let e of Z)e();isFinite(v)||(v=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",S,!0))}},L=()=>{if(v<0){let t=T();v=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((r=>r.name==="hidden"&&r.startTime>t))[0]?.startTime)??V(),addEventListener("visibilitychange",S,!0),addEventListener("prerenderingchange",S,!0),y((()=>{setTimeout((()=>{v=V()}))}))}return{get firstHiddenTime(){return v},onHidden(t){Z.add(t)}}},q=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},$=[1800,3e3],U=(t,e={})=>{q((()=>{let r=L(),n,i=f("FCP"),o=b("paint",(s=>{for(let a of s)a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-T(),0),i.entries.push(a),n(!0)))}));o&&(n=p(t,i,$,e.reportAllChanges),y((s=>{i=f("FCP"),n=p(t,i,$,e.reportAllChanges),N((()=>{i.value=performance.now()-s.timeStamp,n(!0)}))})))}))},J=[.1,.25],ee=(t,e={})=>{let r=L();U(F((()=>{let n,i=f("CLS",0),o=x(e,k),s=c=>{for(let d of c)o.h(d);o.i>i.value&&(i.value=o.i,i.entries=o.o,n())},a=b("layout-shift",s);a&&(n=p(t,i,J,e.reportAllChanges),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),y((()=>{o.i=0,i=f("CLS",0),n=p(t,i,J,e.reportAllChanges),N((()=>n()))})),setTimeout(n))})))},te=0,C=1/0,M=0,fe=t=>{for(let e of t)e.interactionId&&(C=Math.min(C,e.interactionId),M=Math.max(M,e.interactionId),te=M?(M-C)/7+1:0)},I,z=()=>I?te:performance.interactionCount??0,ge=()=>{"interactionCount"in performance||I||(I=b("event",fe,{type:"event",buffered:!0,durationThreshold:0}))},G=0,E=class{constructor(){g(this,"u",[]);g(this,"l",new Map);g(this,"m");g(this,"p")}v(){G=z(),this.u.length=0,this.l.clear()}L(){let e=Math.min(this.u.length-1,Math.floor((z()-G)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;let r=this.u.at(-1),n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((i,o)=>o.P-i.P)),this.u.length>10){let i=this.u.splice(10);for(let o of i)this.l.delete(o.id)}this.p?.(n)}}},ne=t=>{let e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=F(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},j=[200,500],re=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;let r=L();q((()=>{ge();let n,i=f("INP"),o=x(e,E),s=c=>{ne((()=>{for(let m of c)o.h(m);let d=o.L();d&&d.P!==i.value&&(i.value=d.P,i.entries=d.entries,n())}))},a=b("event",s,{durationThreshold:e.durationThreshold??40});n=p(t,i,j,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),y((()=>{o.v(),i=f("INP"),n=p(t,i,j,e.reportAllChanges)})))}))},B=class{constructor(){g(this,"m")}h(e){this.m?.(e)}},K=[2500,4e3],ie=(t,e={})=>{q((()=>{let r=L(),n,i=f("LCP"),o=x(e,B),s=c=>{e.reportAllChanges||(c=c.slice(-1));for(let d of c)o.h(d),d.startTime<r.firstHiddenTime&&(i.value=Math.max(d.startTime-T(),0),i.entries=[d],n())},a=b("largest-contentful-paint",s);if(a){n=p(t,i,K,e.reportAllChanges);let c=F((()=>{s(a.takeRecords()),a.disconnect(),n(!0)})),d=m=>{m.isTrusted&&(ne(c),removeEventListener(m.type,d,{capture:!0}))};for(let m of["keydown","click","visibilitychange"])addEventListener(m,d,{capture:!0});y((m=>{i=f("LCP"),n=p(t,i,K,e.reportAllChanges),N((()=>{i.value=performance.now()-m.timeStamp,n(!0)}))}))}}))},Q=[800,1800],A=t=>{document.prerendering?q((()=>A(t))):document.readyState!=="complete"?addEventListener("load",(()=>A(t)),!0):setTimeout(t)},oe=(t,e={})=>{let r=f("TTFB"),n=p(t,r,Q,e.reportAllChanges);A((()=>{let i=H();i&&(r.value=Math.max(i.responseStart-T(),0),r.entries=[i],n(!0),y((()=>{r=f("TTFB",0),n=p(t,r,Q,e.reportAllChanges),n(!0)})))}))};function se(){let t=e=>{let r=l({type:"webVital",metric:e});u(r)};ie(t),ee(t),re(t),U(t),oe(t)}var me=0;function O(){return`req_${Date.now()}_${++me}`}var w=new Map,ae=5e3;function R(t){if(w.set(t,Date.now()),w.size>100){let e=Date.now();for(let[r,n]of w.entries())e-n>ae&&w.delete(r)}}function he(t,e){let r=w.get(t);if(r===void 0)return!1;let n=performance.timeOrigin+e;return Math.abs(n-r)<ae?(w.delete(t),!0):!1}function D(t){return typeof performance>"u"||!performance.getEntriesByType?void 0:performance.getEntriesByType("resource").filter(n=>n.name===t).pop()}function ve(){let t=window.fetch;t&&(window.fetch=async function(e,r){let n=O(),i=performance.now(),o,s;e instanceof Request?(o=e.url,s=e.method):(o=e.toString(),s=r?.method??"GET");try{let a=await t.call(window,e,r),c=performance.now();R(o);let d=l({type:"networkRequest",requestId:n,method:s.toUpperCase(),url:o,statusCode:a.status,durationMs:Math.round(c-i),success:a.ok,requestType:"fetch",timing:D(o)});return u(d),a}catch(a){let c=performance.now();R(o);let d=l({type:"networkRequest",requestId:n,method:s.toUpperCase(),url:o,statusCode:0,durationMs:Math.round(c-i),success:!1,error:a instanceof Error?a.message:String(a),requestType:"fetch",timing:D(o)});throw u(d),a}})}function ye(){let t=XMLHttpRequest.prototype.open,e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(r,n,i=!0,o,s){return this._bitdrift={method:r.toUpperCase(),url:n.toString(),requestId:O()},t.call(this,r,n,i,o,s)},XMLHttpRequest.prototype.send=function(r){let n=this,i=n._bitdrift;if(!i)return e.call(this,r);let o=performance.now(),s=()=>{let c=performance.now();R(i.url);let d=l({type:"networkRequest",requestId:i.requestId,method:i.method,url:i.url,statusCode:n.status,durationMs:Math.round(c-o),success:n.status>=200&&n.status<400,requestType:"xmlhttprequest",timing:D(i.url)});u(d)},a=()=>{let c=performance.now();R(i.url);let d=l({type:"networkRequest",requestId:i.requestId,method:i.method,url:i.url,statusCode:0,durationMs:Math.round(c-o),success:!1,error:"Network error",requestType:"xmlhttprequest"});u(d)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("abort",a),n.addEventListener("timeout",a),e.call(this,r)}}function we(){if(!(typeof PerformanceObserver>"u"))try{new PerformanceObserver(e=>{for(let r of e.getEntries()){let n=r;if(he(n.name,n.responseEnd)||n.name.startsWith("data:")||n.name.startsWith("blob:"))continue;let i=Math.round(n.responseEnd-n.startTime),o=n.responseEnd>0,s=l({type:"networkRequest",requestId:O(),method:"GET",url:n.name,statusCode:n.responseStatus,durationMs:i,success:o,requestType:n.initiatorType,timing:n});u(s)}}).observe({type:"resource",buffered:!1})}catch{}}function de(){ve(),ye(),we()}var h="";function ce(){h=window.location.href;let t=history.pushState;history.pushState=function(r,n,i){let o=h;t.call(this,r,n,i);let s=window.location.href;o!==s&&(h=s,W(o,s,"pushState"))};let e=history.replaceState;history.replaceState=function(r,n,i){let o=h;e.call(this,r,n,i);let s=window.location.href;o!==s&&(h=s,W(o,s,"replaceState"))},window.addEventListener("popstate",()=>{let r=h,n=window.location.href;r!==n&&(h=n,W(r,n,"popstate"))})}function W(t,e,r){let n=l({type:"navigation",fromUrl:t,toUrl:e,method:r});u(n)}function Te(){X();let t=l({type:"bridgeReady",url:window.location.href});u(t),de(),ce(),se()}Te();})();
})();
